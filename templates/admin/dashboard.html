{% extends 'base.html' %}
{% block title %}Admin Dashboard{% endblock %}
{% block content %}
<h3>Admin Dashboard</h3>
<div class="row gy-3">
  <div class="col-md-3"><div class="card p-3"><h5>Total products</h5><p class="h4">{{ total_products }}</p><a class="btn btn-sm btn-primary" href="{{ url_for('admin_products') }}">Products</a></div></div>
  <div class="col-md-3"><div class="card p-3"><h5>Total customers</h5><p class="h4">{{ total_customers }}</p><a class="btn btn-sm btn-primary" href="{{ url_for('admin_customers') }}">Customers</a></div></div>
  <div class="col-md-3"><div class="card p-3"><h5>Total sales</h5><p class="h4">{{ total_sales }}</p><a class="btn btn-sm btn-primary" href="{{ url_for('admin_sales') }}">Sales</a></div></div>
  <div class="col-md-3"><div class="card p-3"><h5>Pending payments</h5><p class="h4">{{ pending_payments }}</p><a class="btn btn-sm btn-primary" href="{{ url_for('payments_list') }}">Payments</a></div></div>
</div>

<div class="row mt-3">
  <div class="col-md-3"><a class="btn btn-outline-secondary w-100 mb-2" href="{{ url_for('admin_raw_materials') }}">Raw Materials</a></div>
  <div class="col-md-3"><a class="btn btn-outline-secondary w-100 mb-2" href="{{ url_for('trips') }}">Trips</a></div>
  <div class="col-md-3"><a class="btn btn-outline-secondary w-100 mb-2" href="{{ url_for('sales_report') }}">Sales Report</a></div>
  <div class="col-md-3"><a class="btn btn-outline-secondary w-100 mb-2" href="{{ url_for('admin_routes') }}">All Routes</a></div>
</div>
<div class="row mt-3">
  <div class="col-md-3"><a class="btn btn-outline-primary w-100 mb-2" href="{{ url_for('admin_audit') }}">Audit Log</a></div>
  <div class="col-md-3"><a class="btn btn-outline-primary w-100 mb-2" href="{{ url_for('admin_reconciliation') }}">Reconciliation</a></div>
</div>

<div class="row mt-4">
  <div class="col-md-6">
    <h5>Low stock products</h5>
    {% if low_products %}
      <ul class="list-group">
      {% for p in low_products %}
        <li class="list-group-item d-flex justify-content-between align-items-center">{{ p.name }} <span class="badge bg-danger">{{ p.qty }} (reorder {{ p.reorder_level }})</span></li>
      {% endfor %}
      </ul>
    {% else %}
      <div class="alert alert-success">No low stock products</div>
    {% endif %}
  </div>
  <div class="col-md-6">
    <h5>Low raw materials</h5>
    {% if low_materials %}
      <ul class="list-group">
      {% for m in low_materials %}
        <li class="list-group-item d-flex justify-content-between align-items-center">{{ m.name }} <span class="badge bg-danger">{{ m.qty }} (reorder {{ m.reorder_level }})</span></li>
      {% endfor %}
      </ul>
    {% else %}
      <div class="alert alert-success">No low raw materials</div>
    {% endif %}
  </div>
</div>
{% endblock %}